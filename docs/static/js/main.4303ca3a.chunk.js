(this["webpackJsonpstudio-anderhalden"]=this["webpackJsonpstudio-anderhalden"]||[]).push([[0],{10:function(e,t,n){e.exports={Info:"Info_Info__3WoRg",infoCurtain:"Info_infoCurtain__17dII",isTransitioning:"Info_isTransitioning__1fRnE",isClosed:"Info_isClosed__30Tas",close:"Info_close__3kAyz",isOpen:"Info_isOpen__3spwN",open:"Info_open__SO0W7"}},11:function(e,t,n){e.exports={Navigation:"Navigation_Navigation__1tTPb",mobileNav:"Navigation_mobileNav__34zkU",spacer:"Navigation_spacer__1vJOr"}},114:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),o=n(42),r=n.n(o),c=(n(54),n(43)),s=n.n(c),l=n(5),u=n(44),d=n(45);function f(e){return null!==e&&"function"!==typeof e&&"object"===typeof e&&!Array.isArray(e)}function m(e){return/#[0-9A-Fa-f]{3}/.test(e)||/#[0-9A-Fa-f]{6}/.test(e)}function g(){var e=window.innerWidth<window.innerHeight;if(f(window.screen.orientation)){var t=window.screen.orientation.type;e="string"===typeof t&&t.includes("portrait")}return e}function j(){return g()?window.innerWidth<620:window.innerWidth<820}var p={};function b(e){if(p[e])return p[e];var t=window.getComputedStyle(document.documentElement).getPropertyValue(e);return p[e]=t,t}function h(e){return e.endsWith("px")?Number(e.slice(0,-2)):0}function v(e){return f(e)&&e.hasOwnProperty("content")&&e.hasOwnProperty("nodeType")?e:(console.warn("unknown rich text entry",e),null)}function _(e){var t,n,i,a;return f(e)&&f(e.sys)&&f(e.fields)?{id:e.sys.id,title:e.fields.title,file:{url:f(e.fields.file)?e.fields.file.url:"",width:f(null===(t=e.fields.file)||void 0===t||null===(n=t.details)||void 0===n?void 0:n.image)?e.fields.file.details.image.width:0,height:f(null===(i=e.fields.file)||void 0===i||null===(a=i.details)||void 0===a?void 0:a.image)?e.fields.file.details.image.height:0}}:(console.warn("unknown image entry",e),null)}var y=function(e){if(f(e.fields)&&f(e.sys)){var t={id:"",createdAt:(new Date).toISOString(),title:"",text:null,footnote:null,thumbnail:null,images:[]};typeof e.sys.id===typeof t.id&&(t.id=e.sys.id),typeof e.sys.createdAt===typeof t.createdAt&&(t.createdAt=e.sys.createdAt),typeof e.fields.titel===typeof t.title&&(t.title=e.fields.titel);var n=v(e.fields.text);n&&(t.text=n);var i=v(e.fields.fussnote);i&&(t.footnote=i);var a=_(e.fields.thumbnail);return a&&(t.thumbnail=a),Array.isArray(e.fields.bilder)&&(t.images=e.fields.bilder.map((function(e){return _(e)})).filter((function(e){return!!e}))),t}console.warn("unknown project item",e)};var x=function(e){if(!f(e.fields))return console.warn("unknown info block item",e),null;var t={text:null,images:[]};if(e.fields.text){var n=v(e.fields.text);n&&(t.text=n)}return Array.isArray(e.fields.bild)&&(t.images=e.fields.bild.map((function(e){return _(e)})).filter((function(e){return!!e}))),t},O=n(8);var w=function(e){var t={enabled:!1,documentTitle:"",animationTime:0,imageSize:0,ratio:0,palette:{black:"#000",grey:"#999",lightgrey:"#E5E5E5",white:"#FFF"}};if(!f(e.fields))return console.warn("unknown config item",e),t;if(typeof e.fields.configAktiv===typeof t.enabled&&(t.enabled=e.fields.configAktiv),typeof e.fields.websiteTitel===typeof t.documentTitle&&(t.documentTitle=e.fields.websiteTitel),typeof e.fields.animationszeit===typeof t.animationTime&&(t.animationTime=Math.min(4,Math.max(.2,e.fields.animationszeit))),typeof e.fields.maximaleBildgre===typeof t.imageSize&&(t.imageSize=Math.min(1e3,Math.max(400,e.fields.maximaleBildgre))),"string"===typeof e.fields.bildSeitenverhltnis){var n=e.fields.bildSeitenverhltnis.split(":").map((function(e){return Number(e)})),i=Object(O.a)(n,2),a=i[0],o=i[1];isNaN(a)||isNaN(o)||(t.ratio=Math.min(2,Math.max(1,a/o)))}return m(e.fields.schwarz)&&(t.palette.black=e.fields.schwarz),m(e.fields.grau)&&(t.palette.grey=e.fields.grau),m(e.fields.hellgrau)&&(t.palette.lightgrey=e.fields.hellgrau),m(e.fields.weiss)&&(t.palette.white=e.fields.weiss),t},I="projekt",P="infoBlock",k="config";var T=function(e){var t={projects:[],infoBlocks:[],config:null};return f(e)&&Array.isArray(e.items)&&f(e.includes)&&Array.isArray(e.includes.Asset)?(e.items.forEach((function(e){var n,i,a;if(f(e))switch(null===(n=e.sys)||void 0===n||null===(i=n.contentType)||void 0===i||null===(a=i.sys)||void 0===a?void 0:a.id){case I:var o=y(e);if(!o)break;t.projects.unshift(o);break;case P:var r=x(e);if(!r)break;t.infoBlocks.unshift(r);break;case k:if(t.config)break;var c=w(e);if(!c)break;t.config=c;break;default:console.warn("unknown item type",e)}else console.warn("unknown item",e)})),t.projects=t.projects.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})),t):(console.warn("unknown raw data",e),t)},N=n(55),A=new(function(){function e(){Object(u.a)(this,e),this._client=void 0,this._client=N.createClient({space:"b522n0157zmv",accessToken:"k5don56ounRIbth9QrBNF1jZ14zqfcQ2muxGIfwg0r4"})}return Object(d.a)(e,[{key:"getSiteContent",value:function(){return this._client.getEntries().then((function(e){return T(e)}))}},{key:"getImageUrl",value:function(e){var t=e.id,n=e.width,i=e.height;return this._client.getAsset(t).then((function(e){return"".concat(e.fields.file.url,"?fit=fill&w=").concat(n,"&h=").concat(i)}))}}]),e}()),C="get-site-content",S="set-target",B="set-page",z="set-project-id",E="home",M="projects",R="info",W={siteContent:{projects:[],infoBlocks:[],config:null},targetPage:E,selectedPage:E,selectedProjectId:""};function L(e,t){switch(t.type){case C:return Object(l.a)(Object(l.a)({},e),{},{siteContent:t.payload});case S:return Object(l.a)(Object(l.a)({},e),{},{targetPage:t.payload});case B:return Object(l.a)(Object(l.a)({},e),{},{selectedPage:t.payload});case z:return Object(l.a)(Object(l.a)({},e),{},{selectedProjectId:t.payload});default:return e}}var F={getSiteContent:function(){return new Promise((function(e){A.getSiteContent().then((function(t){var n;(n=t.config).enabled&&(document.title=n.documentTitle,document.documentElement.style.setProperty("--black",n.palette.black),document.documentElement.style.setProperty("--grey",n.palette.grey),document.documentElement.style.setProperty("--lightgrey",n.palette.lightgrey),document.documentElement.style.setProperty("--white",n.palette.white),document.documentElement.style.setProperty("--animation-time","".concat(n.animationTime,"s"))),e({type:C,payload:t})}))}))},setTarget:function(e){return{type:S,payload:e}},setPage:function(e){return{type:B,payload:e}},setProjectId:function(e){return{type:z,payload:e}}};var D=function(e,t){var n=Object(i.useReducer)(e,t),a=Object(O.a)(n,2),o=a[0],r=a[1];return{state:o,asyncDispatch:Object(i.useMemo)((function(){return function(e){return function(t){return t instanceof Promise?t.then(e):e(t)}}(r)}),[r])}},H=n(1),K=n(11),Z=n.n(K),G=n(4),J=n.n(G),U=n(0);var Q=function(e){var t=e.mobileNavIndex,n=void 0===t?-1:t,i=e.children,a=n>-1;return a&&Array.isArray(i)&&(i=i.slice(n,n+1)),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{className:J()(Z.a.Navigation,Object(H.a)({},Z.a.mobileNav,a)),children:i}),a&&Object(U.jsx)("div",{className:Z.a.spacer})]})},V=n(9),q=n.n(V);var X=function(e){var t,n,i=e.open,a=e.onOpen,o=e.onClose;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{className:J()("".concat(q.a.Curtain," ").concat(q.a.left),(t={},Object(H.a)(t,q.a.open,i),Object(H.a)(t,q.a.closed,!i),t))}),Object(U.jsx)("div",{className:J()("".concat(q.a.Curtain," ").concat(q.a.right),(n={},Object(H.a)(n,q.a.open,i),Object(H.a)(n,q.a.closed,!i),n)),onTransitionEnd:function(){if(i){if("function"!==typeof a)return;a()}else{if("function"!==typeof o)return;o()}}})]})},Y=n(47),$=n.n(Y);var ee=function(e){var t=e.children;return Object(U.jsx)("div",{className:$.a.Logo,children:t})},te=n(12),ne=n.n(te);var ie=function(e){var t,n=e.label,i=e.active,a=e.disabled,o=e.cta,r=e.stopPropagation;return Object(U.jsx)("button",{className:J()(ne.a.Button,(t={},Object(H.a)(t,ne.a.active,i),Object(H.a)(t,ne.a.disabled,a),t)),onClick:function(e){r&&e.stopPropagation(),a||"function"!==typeof o||o()},children:n})},ae=n(22),oe=n.n(ae),re=n(23),ce=n.n(re),se=n(24),le=n.n(se);var ue=function(e){var t=e.width,n=e.ratio,a=e.id,o=e.title,r=e.file,c=Math.round(t/n),s=Object(i.useRef)(null),l=Object(i.useState)(""),u=Object(O.a)(l,2),d=u[0],f=u[1],m=Object(i.useState)(!1),g=Object(O.a)(m,2),j=g[0],p=g[1];return Object(i.useEffect)((function(){A.getImageUrl({id:a,width:t,height:c}).then((function(e){return f(e)})).catch((function(e){console.warn("no image url",e),f(r.url)}));var e=setTimeout((function(){return p(!0)}),5e3);return function(){return clearTimeout(e)}}),[a,t,c,r.url]),Object(U.jsx)("div",{className:le.a.ImageBox,style:{width:"".concat(t,"px"),height:"".concat(c,"px"),opacity:j?1:0},children:d&&Object(U.jsx)("img",{className:le.a.Image,ref:s,src:d,alt:o,onLoad:function(){return p(!0)},onError:function(){return f(r.url)}})})};var de=function(e){var t=e.item,n=e.config,i=e.callback,a=e.fixedWidth;if(!t.thumbnail)return Object(U.jsx)("div",{className:ce.a.ProjectsItem,children:"no thumbnail"});var o=(null===n||void 0===n?void 0:n.imageSize)||h(b("--default-content-width")),r=(null===n||void 0===n?void 0:n.ratio)||Number(b("--default-image-ratio")),c=0;return t.thumbnail.file.width<t.thumbnail.file.height&&(r=1/r),a?c=a:(c=Math.round(Math.min(o,window.innerWidth/2)),r<1&&(c=Math.round(c*r))),Object(U.jsx)("div",{className:ce.a.ProjectsItem,title:t.title,onClick:function(){return i()},children:Object(U.jsx)(ue,Object(l.a)({width:c,ratio:r},t.thumbnail))})};var fe=function(e){var t=e.items,n=e.config,i=e.setProjectId,a=0;return j()&&g()&&(a=window.innerWidth-2*h(b("--padding-medium"))),Object(U.jsxs)("div",{className:oe.a.Projects,children:[Object(U.jsx)("div",{className:oe.a.centerLine}),t.map((function(e,t){return Object(U.jsx)(de,{item:e,config:n,callback:function(){return i(e.id)},fixedWidth:a},t)}))]})},me=n(10),ge=n.n(me),je=n(48),pe=n.n(je),be=n(49),he=n(13),ve=n.n(he),_e={M:"m",S:"s"};Object.values(_e);function ye(e){return Object(be.documentToReactComponents)(e)}var xe=function(e){var t,n=e.entry,i=e.size;return Object(U.jsx)("div",{className:J()(ve.a.RichText,(t={},Object(H.a)(t,ve.a.mediumSize,i===_e.M),Object(H.a)(t,ve.a.smallSize,i===_e.S),t)),children:ye(n)})};var Oe=function(e){var t=e.item,n=e.width;return Object(U.jsxs)("div",{className:pe.a.InfoItem,style:{width:"".concat(n,"px")},children:[!!t.images.length&&Object(U.jsx)(ue,Object(l.a)({width:n-2*h(b("--padding-large")),ratio:1.6},t.images[0])),t.text&&Object(U.jsx)(xe,{entry:t.text,size:"m"})]})};var we=function(e){var t,n=e.items,a=e.config,o=e.open,r=e.onOpen,c=e.onClose,s=Object(i.useState)(!1),l=Object(O.a)(s,2),u=l[0],d=l[1];Object(i.useEffect)((function(){return d(!0)}),[o]);var f=Math.round(Math.min((null===a||void 0===a?void 0:a.imageSize)||h(b("--default-content-width")),window.innerWidth/2));return j()&&g()&&(f=window.innerWidth-2*h(b("--padding-medium"))),Object(U.jsx)("div",{className:ge.a.Info,style:{width:"".concat(f,"px")},children:Object(U.jsx)("div",{className:J()(ge.a.infoCurtain,(t={},Object(H.a)(t,ge.a.isTransitioning,u),Object(H.a)(t,ge.a.isOpen,o),Object(H.a)(t,ge.a.isClosed,!o),t)),onAnimationEnd:function(){if(d(!1),o){if("function"!==typeof r)return;r()}else{if("function"!==typeof c)return;c()}},children:n.map((function(e,t){return Object(U.jsx)(Oe,{item:e,width:f},t)}))})})},Ie=n(14),Pe=n.n(Ie),ke="";var Te=function(e){var t,n=e.page,i=e.target,a=e.selected,o=e.children;return ke!==a&&(window.scroll(0,0),ke=a),Object(U.jsx)("div",{className:J()(Pe.a.PageBox,(t={},Object(H.a)(t,Pe.a.isTarget,n===i),Object(H.a)(t,Pe.a.isSelected,n===a),t)),children:o})};var Ne=function(){var e=D(L,W),t=e.state,n=e.asyncDispatch,a=t.siteContent,o=t.targetPage,r=t.selectedPage;t.selectedProjectId,Object(i.useEffect)((function(){n(F.getSiteContent())}),[n]);var c=(o!==E||r!==E)&&j(),l=-1;return c&&(l=o===R?0:1),console.log("app render state",t),Object(U.jsxs)("div",{className:r===E?s.a.isHome:"",children:[Object(U.jsx)(X,{open:o!==E,onOpen:function(){return n(F.setPage(o))},onClose:function(){return n(F.setPage(E))}}),Object(U.jsxs)(Q,{mobileNavIndex:l,children:[Object(U.jsx)(ie,{label:c?"x":"Grafik",active:o===M,disabled:!a.projects.length,cta:function(){return n(F.setTarget(M))}}),Object(U.jsx)(ie,{label:c?"...":"Kontakt + Info",active:o===R,disabled:!a.infoBlocks.length,cta:function(){return n(F.setTarget(R))}})]}),Object(U.jsx)(ee,{children:Object(U.jsx)(ie,{label:a.config?a.config.documentTitle:"Studio Anderhalden",cta:function(){return n(F.setTarget(E))}})}),Object(U.jsx)(Te,{page:M,target:o,selected:r,children:Object(U.jsx)(fe,{items:a.projects,config:a.config,setProjectId:function(e){return n(F.setProjectId(e))}})}),Object(U.jsx)(Te,{page:R,target:o,selected:r,children:Object(U.jsx)(we,{items:a.infoBlocks,config:a.config,open:o===R,onOpen:function(){return n(F.setPage(R))},onClose:function(){return n(F.setPage(o))}})})]})};r.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(Ne,{})}),document.getElementById("root"))},12:function(e,t,n){e.exports={Button:"Button_Button__3R1xi",active:"Button_active__TCjlx",disabled:"Button_disabled__2c3jr"}},13:function(e,t,n){e.exports={RichText:"RichText_RichText__1BywL",mediumSize:"RichText_mediumSize__1Xnal",smallSize:"RichText_smallSize__BL3Kk"}},14:function(e,t,n){e.exports={PageBox:"PageBox_PageBox__CpPMT",isTarget:"PageBox_isTarget__fESuA",isSelected:"PageBox_isSelected__ls1KE"}},21:function(e,t){},22:function(e,t,n){e.exports={Projects:"Projects_Projects__1ECks",centerLine:"Projects_centerLine__39BzK"}},23:function(e,t,n){e.exports={ProjectsItem:"ProjectsItem_ProjectsItem__ixgAC"}},24:function(e,t,n){e.exports={ImageBox:"Image_ImageBox__16ZVW",Image:"Image_Image__1br15"}},43:function(e,t,n){e.exports={App:"App_App__16ZpL",isHome:"App_isHome__oTROn"}},47:function(e,t,n){e.exports={Logo:"Logo_Logo__1N0xH",wiggle:"Logo_wiggle__23iAG"}},48:function(e,t,n){e.exports={InfoItem:"InfoItem_InfoItem__26gzv"}},54:function(e,t,n){},83:function(e,t){},9:function(e,t,n){e.exports={Curtain:"Curtain_Curtain__23SsW",left:"Curtain_left__3IErm",right:"Curtain_right__Zgczi",open:"Curtain_open__3Pkll",closed:"Curtain_closed__3MPTA"}}},[[114,1,2]]]);
//# sourceMappingURL=main.4303ca3a.chunk.js.map