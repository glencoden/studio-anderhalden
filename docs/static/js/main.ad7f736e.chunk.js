(this["webpackJsonpstudio-anderhalden"]=this["webpackJsonpstudio-anderhalden"]||[]).push([[0],{10:function(e,t,n){e.exports={Info:"Info_Info__3WoRg",infoCurtain:"Info_infoCurtain__17dII",isTransitioning:"Info_isTransitioning__1fRnE",isClosed:"Info_isClosed__30Tas",close:"Info_close__3kAyz",isOpen:"Info_isOpen__3spwN",open:"Info_open__SO0W7"}},11:function(e,t,n){e.exports={ProjectDetail:"ProjectDetail_ProjectDetail__3C2sP",imageBox:"ProjectDetail_imageBox__3qDiS",textBox:"ProjectDetail_textBox__l3wqu",space:"ProjectDetail_space__oKQy0"}},117:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),o=n(46),r=n.n(o),c=(n(57),n(1)),s=n(24),l=n.n(s),u=n(3),d=n.n(u),f=n(8);var j=function(e,t){var n=Object(i.useReducer)(e,t),a=Object(f.a)(n,2),o=a[0],r=a[1];return{state:o,asyncDispatch:Object(i.useMemo)((function(){return function(e){return function(t){return t instanceof Promise?t.then(e):e(t)}}(r)}),[r])}},m=n(5),g=n(47),b=n(48);function p(e){var t=Math.round(Math.min((null===e||void 0===e?void 0:e.imageSize)||P(w("--default-content-width")),window.innerWidth/2));return O()&&_()&&(t=window.innerWidth-2*P(w("--padding-medium"))),t}function h(e){return(null===e||void 0===e?void 0:e.ratio)||Number(w("--default-image-ratio"))}function v(e){return null!==e&&"function"!==typeof e&&"object"===typeof e&&!Array.isArray(e)}function x(e){return/#[0-9A-Fa-f]{3}/.test(e)||/#[0-9A-Fa-f]{6}/.test(e)}function _(){var e=window.innerWidth<window.innerHeight;if(v(window.screen.orientation)){var t=window.screen.orientation.type;e="string"===typeof t&&t.includes("portrait")}return e}function O(){return _()?window.innerWidth<620:window.innerWidth<820}var y={};function w(e){if(y[e])return y[e];var t=window.getComputedStyle(document.documentElement).getPropertyValue(e);return y[e]=t,t}function P(e){return e.endsWith("px")?Number(e.slice(0,-2)):0}function N(e){return v(e)&&e.hasOwnProperty("content")&&e.hasOwnProperty("nodeType")?e:(console.warn("unknown rich text entry",e),null)}function I(e){var t,n,i,a;return v(e)&&v(e.sys)&&v(e.fields)?{id:e.sys.id,title:e.fields.title,file:{url:v(e.fields.file)?e.fields.file.url:"",width:v(null===(t=e.fields.file)||void 0===t||null===(n=t.details)||void 0===n?void 0:n.image)?e.fields.file.details.image.width:0,height:v(null===(i=e.fields.file)||void 0===i||null===(a=i.details)||void 0===a?void 0:a.image)?e.fields.file.details.image.height:0}}:(console.warn("unknown image entry",e),null)}var k=function(e){if(v(e.fields)&&v(e.sys)){var t={id:"",createdAt:(new Date).toISOString(),title:"",text:null,footnote:null,thumbnail:null,images:[]};typeof e.sys.id===typeof t.id&&(t.id=e.sys.id),typeof e.sys.createdAt===typeof t.createdAt&&(t.createdAt=e.sys.createdAt),typeof e.fields.titel===typeof t.title&&(t.title=e.fields.titel);var n=N(e.fields.text);n&&(t.text=n);var i=N(e.fields.fussnote);i&&(t.footnote=i);var a=I(e.fields.thumbnail);return a&&(t.thumbnail=a),Array.isArray(e.fields.bilder)&&(t.images=e.fields.bilder.map((function(e){return I(e)})).filter((function(e){return!!e}))),t}console.warn("unknown project item",e)};var C=function(e){if(!v(e.fields))return console.warn("unknown info block item",e),null;var t={text:null,images:[]};if(e.fields.text){var n=N(e.fields.text);n&&(t.text=n)}return Array.isArray(e.fields.bild)&&(t.images=e.fields.bild.map((function(e){return I(e)})).filter((function(e){return!!e}))),t};var T=function(e){var t={enabled:!1,documentTitle:"",animationTime:0,imageSize:0,ratio:0,palette:{black:"#000",grey:"#999",lightgrey:"#E5E5E5",white:"#FFF"}};if(!v(e.fields))return console.warn("unknown config item",e),t;if(typeof e.fields.configAktiv===typeof t.enabled&&(t.enabled=e.fields.configAktiv),typeof e.fields.websiteTitel===typeof t.documentTitle&&(t.documentTitle=e.fields.websiteTitel),typeof e.fields.animationszeit===typeof t.animationTime&&(t.animationTime=Math.min(4,Math.max(.2,e.fields.animationszeit))),typeof e.fields.maximaleBildgre===typeof t.imageSize&&(t.imageSize=Math.min(1e3,Math.max(400,e.fields.maximaleBildgre))),"string"===typeof e.fields.bildSeitenverhltnis){var n=e.fields.bildSeitenverhltnis.split(":").map((function(e){return Number(e)})),i=Object(f.a)(n,2),a=i[0],o=i[1];isNaN(a)||isNaN(o)||(t.ratio=Math.min(2,Math.max(1,a/o)))}return x(e.fields.schwarz)&&(t.palette.black=e.fields.schwarz),x(e.fields.grau)&&(t.palette.grey=e.fields.grau),x(e.fields.hellgrau)&&(t.palette.lightgrey=e.fields.hellgrau),x(e.fields.weiss)&&(t.palette.white=e.fields.weiss),t},S="projekt",A="infoBlock",B="config";var z=function(e){var t={projects:[],infoBlocks:[],config:null};return v(e)&&Array.isArray(e.items)&&v(e.includes)&&Array.isArray(e.includes.Asset)?(e.items.forEach((function(e){var n,i,a;if(v(e))switch(null===(n=e.sys)||void 0===n||null===(i=n.contentType)||void 0===i||null===(a=i.sys)||void 0===a?void 0:a.id){case S:var o=k(e);if(!o)break;t.projects.unshift(o);break;case A:var r=C(e);if(!r)break;t.infoBlocks.unshift(r);break;case B:if(t.config)break;var c=T(e);if(!c)break;t.config=c;break;default:console.warn("unknown item type",e)}else console.warn("unknown item",e)})),t.projects=t.projects.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})),t):(console.warn("unknown raw data",e),t)},E=n(58),M=new(function(){function e(){Object(g.a)(this,e),this._client=void 0,this._client=E.createClient({space:"b522n0157zmv",accessToken:"k5don56ounRIbth9QrBNF1jZ14zqfcQ2muxGIfwg0r4"})}return Object(b.a)(e,[{key:"getSiteContent",value:function(){return this._client.getEntries().then((function(e){return z(e)}))}},{key:"getImageUrl",value:function(e){var t=e.id,n=e.width,i=e.height;return this._client.getAsset(t).then((function(e){return"".concat(e.fields.file.url,"?fit=fill&w=").concat(n,"&h=").concat(i)}))}}]),e}()),R="get-site-content",W="set-target",D="set-page",L="set-project-id",F="home",K="projects",q="project-detail",H="info",U={siteContent:{projects:[],infoBlocks:[],config:null},targetPage:F,selectedPage:F,selectedProjectId:""};function Z(e,t){switch(t.type){case R:return Object(m.a)(Object(m.a)({},e),{},{siteContent:t.payload});case W:return Object(m.a)(Object(m.a)({},e),{},{targetPage:t.payload});case D:return Object(m.a)(Object(m.a)({},e),{},{selectedPage:t.payload});case L:return Object(m.a)(Object(m.a)({},e),{},{selectedProjectId:t.payload});default:return e}}var G={getSiteContent:function(){return new Promise((function(e){M.getSiteContent().then((function(t){var n;(n=t.config).enabled&&(document.title=n.documentTitle,document.documentElement.style.setProperty("--black",n.palette.black),document.documentElement.style.setProperty("--grey",n.palette.grey),document.documentElement.style.setProperty("--lightgrey",n.palette.lightgrey),document.documentElement.style.setProperty("--white",n.palette.white),document.documentElement.style.setProperty("--animation-time","".concat(n.animationTime,"s"))),e({type:R,payload:t})}))}))},setTarget:function(e){return{type:W,payload:e}},setPage:function(e){return{type:D,payload:e}},setProjectId:function(e){return{type:L,payload:e}}},J=n(12),Q=n.n(J),V=n(0);var X=function(e){var t=e.isMobileNav,n=e.mobileNavIndex,i=void 0===n?-1:n,a=e.children;return i>-1&&Array.isArray(a)&&(a=a.slice(i,i+1)),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:d()(Q.a.Navigation,Object(c.a)({},Q.a.mobileNav,t)),children:a}),t&&Object(V.jsx)("div",{className:Q.a.spacer})]})},Y=n(9),$=n.n(Y);var ee=function(e){var t,n,i=e.open,a=e.onOpen,o=e.onClose;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:d()("".concat($.a.Curtain," ").concat($.a.left),(t={},Object(c.a)(t,$.a.open,i),Object(c.a)(t,$.a.closed,!i),t))}),Object(V.jsx)("div",{className:d()("".concat($.a.Curtain," ").concat($.a.right),(n={},Object(c.a)(n,$.a.open,i),Object(c.a)(n,$.a.closed,!i),n)),onTransitionEnd:function(){if(i){if("function"!==typeof a)return;a()}else{if("function"!==typeof o)return;o()}}})]})},te=n(50),ne=n.n(te);var ie=function(e){var t=e.children;return Object(V.jsx)("div",{className:ne.a.Logo,children:t})},ae=n(13),oe=n.n(ae);var re=function(e){var t,n=e.label,i=e.active,a=e.disabled,o=e.cta,r=e.stopPropagation,s=e.className,l=void 0===s?"":s;return Object(V.jsx)("button",{className:d()(oe.a.Button,(t={},Object(c.a)(t,l,l),Object(c.a)(t,oe.a.active,i),Object(c.a)(t,oe.a.disabled,a),t)),onClick:function(e){r&&e.stopPropagation(),a||"function"!==typeof o||o()},children:n})},ce=n(26),se=n.n(ce),le=n(14),ue=n.n(le),de=n(27),fe=n.n(de);var je=function(e){var t=e.width,n=e.ratio,a=e.id,o=e.title,r=e.file,c=Math.round(t/n),s=Object(i.useRef)(null),l=Object(i.useState)(""),u=Object(f.a)(l,2),d=u[0],j=u[1],m=Object(i.useState)(!1),g=Object(f.a)(m,2),b=g[0],p=g[1];return Object(i.useEffect)((function(){M.getImageUrl({id:a,width:t,height:c}).then((function(e){return j(e)})).catch((function(e){console.warn("no image url",e),j(r.url)}));var e=setTimeout((function(){return p(!0)}),5e3);return function(){return clearTimeout(e)}}),[a,t,c,r.url]),Object(V.jsx)("div",{className:fe.a.ImageBox,style:{width:"".concat(t,"px"),height:"".concat(c,"px")},children:d&&Object(V.jsx)("img",{className:fe.a.Image,style:{opacity:b?1:0},ref:s,src:d,alt:o,onLoad:function(){return p(!0)},onError:function(){return j(r.url)}})})};var me=function(e){var t=e.item,n=e.config,i=e.callback;if(!t.thumbnail)return Object(V.jsx)("div",{className:ue.a.ProjectsItem,children:"no thumbnail"});var a=p(n),o=h(n);return t.thumbnail.file.width<t.thumbnail.file.height&&(o=1/o),o<1&&(a=Math.round(a*o)),Object(V.jsxs)("div",{className:ue.a.ProjectsItem,title:t.title,onClick:function(){return i()},children:[Object(V.jsx)(je,Object(m.a)({width:a,ratio:o},t.thumbnail)),O()&&Object(V.jsx)("h4",{className:ue.a.title,style:{width:"".concat(a,"px")},children:t.title})]})};var ge=function(e){var t=e.items,n=e.config,i=e.setProjectId;return Object(V.jsxs)("div",{className:se.a.Projects,children:[Object(V.jsx)("div",{className:se.a.centerLine}),t.map((function(e,t){return Object(V.jsx)(me,{item:e,config:n,callback:function(){return i(e.id)}},t)}))]})},be=n(10),pe=n.n(be),he=n(51),ve=n.n(he),xe=n(52),_e=n(15),Oe=n.n(_e),ye={M:"m",S:"s"};Object.values(ye);function we(e){return Object(xe.documentToReactComponents)(e)}var Pe=function(e){var t,n=e.entry,i=e.size;return Object(V.jsx)("div",{className:d()(Oe.a.RichText,(t={},Object(c.a)(t,Oe.a.mediumSize,i===ye.M),Object(c.a)(t,Oe.a.smallSize,i===ye.S),t)),children:we(n)})};var Ne=function(e){var t=e.item,n=e.width;return Object(V.jsxs)("div",{className:ve.a.InfoItem,style:{width:"".concat(n,"px")},children:[!!t.images.length&&Object(V.jsx)(je,Object(m.a)({width:n-2*P(w("--padding-large")),ratio:1.6},t.images[0])),t.text&&Object(V.jsx)(Pe,{entry:t.text,size:"m"})]})};var Ie=function(e){var t,n=e.items,a=e.config,o=e.open,r=e.onOpen,s=e.onClose,l=Object(i.useState)(!1),u=Object(f.a)(l,2),j=u[0],m=u[1];Object(i.useEffect)((function(){return m(!0)}),[o]);var g=Math.round(Math.min((null===a||void 0===a?void 0:a.imageSize)||P(w("--default-content-width")),window.innerWidth/2));return O()&&_()&&(g=window.innerWidth),Object(V.jsx)("div",{className:pe.a.Info,style:{width:"".concat(g,"px")},children:Object(V.jsx)("div",{className:d()(pe.a.infoCurtain,(t={},Object(c.a)(t,pe.a.isTransitioning,j),Object(c.a)(t,pe.a.isOpen,o),Object(c.a)(t,pe.a.isClosed,!o),t)),onAnimationEnd:function(){if(m(!1),o){if("function"!==typeof r)return;r()}else{if("function"!==typeof s)return;s()}},children:n.map((function(e,t){return Object(V.jsx)(Ne,{item:e,width:g},t)}))})})},ke=n(16),Ce=n.n(ke),Te="";var Se=function(e){var t,n=e.page,i=e.target,a=e.selected,o=e.children;return Te!==a&&(window.scroll(0,0),Te=a),Object(V.jsx)("div",{className:d()(Ce.a.PageBox,(t={},Object(c.a)(t,Ce.a.isTarget,n===i),Object(c.a)(t,Ce.a.isSelected,n===a),t)),children:o})},Ae=n(11),Be=n.n(Ae),ze=n(17),Ee=n.n(ze);var Me=function(){return Object(V.jsx)("div",{style:{fontSize:"26px",transform:"rotate(45deg)"},children:"+"})};var Re=function(e){var t=e.onClose,n=e.numProjects,i=e.currentIndex;return Object(V.jsxs)("div",{className:Ee.a.NavClose,children:[!O()&&"number"===typeof n&&"number"===typeof i&&Object(V.jsx)("div",{className:Ee.a.counter,children:"".concat(i+1,"/").concat(n)}),Object(V.jsx)(re,{className:Ee.a.close,label:Object(V.jsx)(Me,{}),cta:function(){return t()}})]})},We=n(28),De=n.n(We);function Le(){return Object(V.jsx)("span",{children:"\u2190"})}function Fe(){return Object(V.jsx)("span",{children:"\u2192"})}var Ke=function(e){var t=e.selectPrev,n=e.selectNext;return Object(V.jsxs)("div",{className:De.a.NavSkip,children:[Object(V.jsx)(re,{className:De.a.selectPrev,label:Object(V.jsx)(Le,{}),cta:t}),Object(V.jsx)(re,{label:Object(V.jsx)(Fe,{}),cta:n})]})};var qe=function(e){var t=e.selectedProjectId,n=e.projects,i=e.config,a=e.setProjectId,o=e.onClose,r=n.find((function(e){return e.id===t}));if(!r)return Object(V.jsx)("div",{children:"no project"});var c=n.indexOf(r),s=(n.length+c-1)%n.length,l=(n.length+c+1)%n.length,u=p(i),d=h(i);return Object(V.jsxs)("div",{className:Be.a.ProjectDetail,children:[Object(V.jsx)("div",{className:Be.a.imageBox,children:r.images.map((function(e,t){return Object(V.jsx)(je,{width:u,ratio:d,id:e.id,title:e.title,file:e.file},t)}))}),Object(V.jsxs)("div",{className:Be.a.textBox,style:O()?{}:{right:"".concat(Math.max(window.innerWidth/2-u,0),"px"),width:"".concat(u/2,"px")},children:[Object(V.jsx)("h1",{children:r.title}),Object(V.jsx)(Pe,{entry:r.text,size:"m"}),Object(V.jsx)(Pe,{entry:r.footnote,size:"s"}),Object(V.jsx)("div",{className:Be.a.space})]}),Object(V.jsx)(Ke,{selectPrev:function(){a(n[s].id),window.scroll(0,0)},selectNext:function(){a(n[l].id),window.scroll(0,0)}}),Object(V.jsx)(Re,{onClose:o,numProjects:n.length,currentIndex:c})]})};var He=function(){var e=j(Z,U),t=e.state,n=e.asyncDispatch,a=t.siteContent,o=t.targetPage,r=t.selectedPage,s=t.selectedProjectId;Object(i.useEffect)((function(){return n(G.getSiteContent())}),[n]);var u=(o!==F||r!==F)&&O();return console.log("app render state",t),Object(V.jsxs)("div",{className:d()(l.a.App,Object(c.a)({},l.a.isHome,r===F)),children:[Object(V.jsx)(ee,{open:o!==F,onOpen:function(){return n(G.setPage(o))},onClose:function(){return n(G.setPage(F))}}),Object(V.jsxs)(X,{isMobileNav:u,mobileNavIndex:u?o===H?0:1:o===q?1:-1,children:[Object(V.jsx)(re,{label:u?Object(V.jsx)(Me,{}):"Grafik",active:o===K,disabled:!a.projects.length,cta:function(){return n(G.setTarget(K))}}),Object(V.jsx)(re,{label:u?"...":"Kontakt + Info",active:o===H,disabled:!a.infoBlocks.length,cta:function(){return n(G.setTarget(H))}})]}),Object(V.jsx)(ie,{children:Object(V.jsx)(re,{label:a.config?a.config.documentTitle:"Studio Anderhalden",cta:function(){return n(G.setTarget(F))}})}),Object(V.jsx)(Se,{page:K,target:o,selected:r,children:Object(V.jsx)(ge,{items:a.projects,config:a.config,setProjectId:function(e){n(G.setProjectId(e)),n(G.setTarget(q)),n(G.setPage(q))}})}),r===q&&Object(V.jsx)(qe,{selectedProjectId:s,projects:a.projects,config:a.config,setProjectId:function(e){return n(G.setProjectId(e))},onClose:function(){n(G.setTarget(K)),n(G.setPage(K))}}),Object(V.jsx)(Se,{page:H,target:o,selected:r,children:Object(V.jsx)(Ie,{items:a.infoBlocks,config:a.config,open:o===H,onOpen:function(){return n(G.setPage(H))},onClose:function(){return n(G.setPage(o))}})})]})};r.a.render(Object(V.jsx)(a.a.StrictMode,{children:Object(V.jsx)(He,{})}),document.getElementById("root"))},12:function(e,t,n){e.exports={Navigation:"Navigation_Navigation__1tTPb",mobileNav:"Navigation_mobileNav__34zkU",spacer:"Navigation_spacer__1vJOr"}},13:function(e,t,n){e.exports={Button:"Button_Button__3R1xi",active:"Button_active__TCjlx",disabled:"Button_disabled__2c3jr"}},14:function(e,t,n){e.exports={ProjectsItem:"ProjectsItem_ProjectsItem__ixgAC",title:"ProjectsItem_title__1n-p3"}},15:function(e,t,n){e.exports={RichText:"RichText_RichText__1BywL",mediumSize:"RichText_mediumSize__1Xnal",smallSize:"RichText_smallSize__BL3Kk"}},16:function(e,t,n){e.exports={PageBox:"PageBox_PageBox__CpPMT",isTarget:"PageBox_isTarget__fESuA",isSelected:"PageBox_isSelected__ls1KE"}},17:function(e,t,n){e.exports={NavClose:"NavClose_NavClose__1-kWt",counter:"NavClose_counter__3vKV-",close:"NavClose_close__15PqR"}},24:function(e,t,n){e.exports={App:"App_App__16ZpL",isHome:"App_isHome__oTROn"}},25:function(e,t){},26:function(e,t,n){e.exports={Projects:"Projects_Projects__1ECks",centerLine:"Projects_centerLine__39BzK"}},27:function(e,t,n){e.exports={ImageBox:"Image_ImageBox__16ZVW",Image:"Image_Image__1br15"}},28:function(e,t,n){e.exports={NavSkip:"NavSkip_NavSkip__UarSh",selectPrev:"NavSkip_selectPrev__3LaqK"}},50:function(e,t,n){e.exports={Logo:"Logo_Logo__1N0xH",wiggle:"Logo_wiggle__23iAG"}},51:function(e,t,n){e.exports={InfoItem:"InfoItem_InfoItem__26gzv"}},57:function(e,t,n){},86:function(e,t){},9:function(e,t,n){e.exports={Curtain:"Curtain_Curtain__23SsW",left:"Curtain_left__3IErm",right:"Curtain_right__Zgczi",open:"Curtain_open__3Pkll",closed:"Curtain_closed__3MPTA"}}},[[117,1,2]]]);
//# sourceMappingURL=main.ad7f736e.chunk.js.map