(this["webpackJsonpstudio-anderhalden"]=this["webpackJsonpstudio-anderhalden"]||[]).push([[0],{10:function(e,t,n){e.exports={Info:"Info_Info__3WoRg",infoCurtain:"Info_infoCurtain__17dII",isTransitioning:"Info_isTransitioning__1fRnE",isClosed:"Info_isClosed__30Tas",close:"Info_close__3kAyz",isOpen:"Info_isOpen__3spwN",open:"Info_open__SO0W7"}},11:function(e,t,n){e.exports={ProjectDetail:"ProjectDetail_ProjectDetail__3C2sP",imageBox:"ProjectDetail_imageBox__3qDiS",textBox:"ProjectDetail_textBox__l3wqu",space:"ProjectDetail_space__oKQy0"}},117:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),o=n(46),r=n.n(o),c=(n(57),n(1)),s=n(14),l=n.n(s),u=n(3),d=n.n(u),f=n(8);var j=function(e,t){var n=Object(i.useReducer)(e,t),a=Object(f.a)(n,2),o=a[0],r=a[1];return{state:o,asyncDispatch:Object(i.useMemo)((function(){return function(e){return function(t){return t instanceof Promise?t.then(e):e(t)}}(r)}),[r])}},m=n(5),p=n(47),b=n(48);function g(e){var t=Math.round(Math.min((null===e||void 0===e?void 0:e.imageSize)||N(w("--default-content-width")),window.innerWidth/2));return O()&&_()&&(t=window.innerWidth-2*N(w("--padding-medium"))),t}function h(e){return(null===e||void 0===e?void 0:e.ratio)||Number(w("--default-image-ratio"))}function v(e){return null!==e&&"function"!==typeof e&&"object"===typeof e&&!Array.isArray(e)}function x(e){return/#[0-9A-Fa-f]{3}/.test(e)||/#[0-9A-Fa-f]{6}/.test(e)}function _(){var e=window.innerWidth<window.innerHeight;if(v(window.screen.orientation)){var t=window.screen.orientation.type;e="string"===typeof t&&t.includes("portrait")}return e}function O(){return _()?window.innerWidth<620:window.innerWidth<820}var y={};function w(e){if(y[e])return y[e];var t=window.getComputedStyle(document.documentElement).getPropertyValue(e);return y[e]=t,t}function N(e){return e.endsWith("px")?Number(e.slice(0,-2)):0}function P(e,t,n){return(e.length+t+n)%e.length}function I(e){return v(e)&&e.hasOwnProperty("content")&&e.hasOwnProperty("nodeType")?e:(console.warn("unknown rich text entry",e),null)}function k(e){var t,n,i,a;return v(e)&&v(e.sys)&&v(e.fields)?{id:e.sys.id,title:e.fields.title,file:{url:v(e.fields.file)?e.fields.file.url:"",width:v(null===(t=e.fields.file)||void 0===t||null===(n=t.details)||void 0===n?void 0:n.image)?e.fields.file.details.image.width:0,height:v(null===(i=e.fields.file)||void 0===i||null===(a=i.details)||void 0===a?void 0:a.image)?e.fields.file.details.image.height:0}}:(console.warn("unknown image entry",e),null)}var C=function(e){if(v(e.fields)&&v(e.sys)){var t={id:"",createdAt:(new Date).toISOString(),title:"",text:null,footnote:null,thumbnail:null,images:[],position:-1};typeof e.sys.id===typeof t.id&&(t.id=e.sys.id),typeof e.sys.createdAt===typeof t.createdAt&&(t.createdAt=e.sys.createdAt),typeof e.fields.titel===typeof t.title&&(t.title=e.fields.titel);var n=I(e.fields.text);n&&(t.text=n);var i=I(e.fields.fussnote);i&&(t.footnote=i);var a=k(e.fields.thumbnail);return a&&(t.thumbnail=a),Array.isArray(e.fields.bilder)&&(t.images=e.fields.bilder.map((function(e){return k(e)})).filter((function(e){return!!e}))),typeof e.fields.position===typeof t.position&&(t.position=e.fields.position),t}console.warn("unknown project item",e)};var B=function(e){if(!v(e.fields))return console.warn("unknown info block item",e),null;var t={text:null,images:[]};if(e.fields.text){var n=I(e.fields.text);n&&(t.text=n)}return Array.isArray(e.fields.bild)&&(t.images=e.fields.bild.map((function(e){return k(e)})).filter((function(e){return!!e}))),t};var T=function(e){var t={enabled:!1,documentTitle:"",animationTime:0,imageSize:0,ratio:0,palette:{black:"#000",grey:"#999",lightgrey:"#E5E5E5",white:"#FFF"}};if(!v(e.fields))return console.warn("unknown config item",e),t;if(typeof e.fields.configAktiv===typeof t.enabled&&(t.enabled=e.fields.configAktiv),typeof e.fields.websiteTitel===typeof t.documentTitle&&(t.documentTitle=e.fields.websiteTitel),typeof e.fields.animationszeit===typeof t.animationTime&&(t.animationTime=Math.min(4,Math.max(.2,e.fields.animationszeit))),typeof e.fields.maximaleBildgre===typeof t.imageSize&&(t.imageSize=Math.min(1e3,Math.max(400,e.fields.maximaleBildgre))),"string"===typeof e.fields.bildSeitenverhltnis){var n=e.fields.bildSeitenverhltnis.split(":").map((function(e){return Number(e)})),i=Object(f.a)(n,2),a=i[0],o=i[1];isNaN(a)||isNaN(o)||(t.ratio=Math.min(2,Math.max(1,a/o)))}return x(e.fields.schwarz)&&(t.palette.black=e.fields.schwarz),x(e.fields.grau)&&(t.palette.grey=e.fields.grau),x(e.fields.hellgrau)&&(t.palette.lightgrey=e.fields.hellgrau),x(e.fields.weiss)&&(t.palette.white=e.fields.weiss),t},S="projekt",A="infoBlock",z="config";var E=function(e){var t={projects:[],infoBlocks:[],config:null};return v(e)&&Array.isArray(e.items)&&v(e.includes)&&Array.isArray(e.includes.Asset)?(e.items.forEach((function(e){var n,i,a;if(v(e))switch(null===(n=e.sys)||void 0===n||null===(i=n.contentType)||void 0===i||null===(a=i.sys)||void 0===a?void 0:a.id){case S:var o=C(e);if(!o)break;t.projects.unshift(o);break;case A:var r=B(e);if(!r)break;t.infoBlocks.unshift(r);break;case z:if(t.config)break;var c=T(e);if(!c)break;t.config=c;break;default:console.warn("unknown item type",e)}else console.warn("unknown item",e)})),t.projects=function(e){var t=e.filter((function(e){return e.position>-1})).sort((function(e,t){return e.position-t.position})),n=e.filter((function(e){return e.position<=-1})).sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}));return t.forEach((function(e){return n.splice(Math.max(e.position-1,0),0,e)})),n}(t.projects),t):(console.warn("unknown raw data",e),t)},M=n(58),W=new(function(){function e(){Object(p.a)(this,e),this._client=void 0,this._client=M.createClient({space:"b522n0157zmv",accessToken:"k5don56ounRIbth9QrBNF1jZ14zqfcQ2muxGIfwg0r4"})}return Object(b.a)(e,[{key:"getSiteContent",value:function(){return this._client.getEntries().then((function(e){return E(e)}))}},{key:"getImageUrl",value:function(e){var t=e.id,n=e.width,i=e.height;return this._client.getAsset(t).then((function(e){return"".concat(e.fields.file.url,"?fit=fill&w=").concat(n,"&h=").concat(i)}))}}]),e}()),R="get-site-content",D="set-target",L="set-page",F="set-project-id",K="home",H="projects",U="project-detail",q="info",J={siteContent:{projects:[],infoBlocks:[],config:null},targetPage:K,selectedPage:K,selectedProjectId:""};function G(e,t){switch(t.type){case R:return Object(m.a)(Object(m.a)({},e),{},{siteContent:t.payload});case D:return Object(m.a)(Object(m.a)({},e),{},{targetPage:t.payload});case L:return Object(m.a)(Object(m.a)({},e),{},{selectedPage:t.payload});case F:return Object(m.a)(Object(m.a)({},e),{},{selectedProjectId:t.payload});default:return e}}var Q={getSiteContent:function(){return new Promise((function(e){W.getSiteContent().then((function(t){var n;(n=t.config).enabled&&(document.title=n.documentTitle,document.documentElement.style.setProperty("--black",n.palette.black),document.documentElement.style.setProperty("--grey",n.palette.grey),document.documentElement.style.setProperty("--lightgrey",n.palette.lightgrey),document.documentElement.style.setProperty("--white",n.palette.white),document.documentElement.style.setProperty("--animation-time","".concat(n.animationTime,"s"))),e({type:R,payload:t})}))}))},setTarget:function(e){return{type:D,payload:e}},setPage:function(e){return{type:L,payload:e}},setProjectId:function(e){return{type:F,payload:e}}},V=n(15),Z=n.n(V),X=n(0);var Y=function(e){var t=e.isMobileNav,n=e.mobileNavIndex,i=void 0===n?-1:n,a=e.children;return i>-1&&Array.isArray(a)&&(a=a.slice(i,i+1)),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("div",{className:d()(Z.a.Navigation,Object(c.a)({},Z.a.mobileNav,t)),children:a}),t&&Object(X.jsx)("div",{className:Z.a.spacer})]})},$=n(9),ee=n.n($);var te=function(e){var t,n,i=e.open,a=e.onOpen,o=e.onClose;return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("div",{className:d()("".concat(ee.a.Curtain," ").concat(ee.a.left),(t={},Object(c.a)(t,ee.a.open,i),Object(c.a)(t,ee.a.closed,!i),t))}),Object(X.jsx)("div",{className:d()("".concat(ee.a.Curtain," ").concat(ee.a.right),(n={},Object(c.a)(n,ee.a.open,i),Object(c.a)(n,ee.a.closed,!i),n)),onTransitionEnd:function(){if(i){if("function"!==typeof a)return;a()}else{if("function"!==typeof o)return;o()}}})]})},ne=n(50),ie=n.n(ne);var ae=function(e){var t=e.children;return Object(X.jsx)("div",{className:ie.a.Logo,children:t})},oe=n(16),re=n.n(oe);var ce=function(e){var t,n=e.label,i=e.active,a=e.disabled,o=e.cta,r=e.stopPropagation,s=e.className,l=void 0===s?"":s;return Object(X.jsx)("button",{className:d()(re.a.Button,(t={},Object(c.a)(t,l,l),Object(c.a)(t,re.a.active,i),Object(c.a)(t,re.a.disabled,a),t)),onClick:function(e){r&&e.stopPropagation(),a||"function"!==typeof o||o()},children:n})},se=n(27),le=n.n(se),ue=n(17),de=n.n(ue),fe=n(28),je=n.n(fe);var me=function(e){var t=e.width,n=e.ratio,a=e.id,o=e.title,r=e.file,c=Math.round(t/n),s=Object(i.useRef)(null),l=Object(i.useState)(""),u=Object(f.a)(l,2),d=u[0],j=u[1],m=Object(i.useState)(!1),p=Object(f.a)(m,2),b=p[0],g=p[1];return Object(i.useEffect)((function(){W.getImageUrl({id:a,width:t,height:c}).then((function(e){return j(e)})).catch((function(e){console.warn("no image url",e),j(r.url)}));var e=setTimeout((function(){return g(!0)}),5e3);return function(){return clearTimeout(e)}}),[a,t,c,r.url]),Object(X.jsx)("div",{className:je.a.ImageBox,style:{width:"".concat(t,"px"),height:"".concat(c,"px")},children:d&&Object(X.jsx)("img",{className:je.a.Image,style:{opacity:b?1:0},ref:s,src:d,alt:o,onLoad:function(){return g(!0)},onError:function(){return j(r.url)}})})};var pe=function(e){var t=e.item,n=e.config,i=e.callback;if(!t.thumbnail)return Object(X.jsx)("div",{className:de.a.ProjectsItem,children:"no thumbnail"});var a=g(n),o=h(n);if(t.thumbnail.file.width===t.thumbnail.file.height&&(a=Math.round(a/o),o=1),t.thumbnail.file.width<t.thumbnail.file.height){var r=a,c=N(w("--padding-medium"));o=(a=Math.round(a/o))/(r-4*c)}return Object(X.jsxs)("div",{className:de.a.ProjectsItem,title:t.title,onClick:function(){return i()},children:[Object(X.jsx)(me,Object(m.a)({width:a,ratio:o},t.thumbnail)),O()&&Object(X.jsx)("h4",{className:de.a.title,style:{width:"".concat(a,"px")},children:t.title})]})};var be=function(e){var t=e.items,n=e.config,i=e.setProjectId;return Object(X.jsxs)("div",{className:le.a.Projects,children:[Object(X.jsx)("div",{className:le.a.centerLine}),t.map((function(e,t){return Object(X.jsx)(pe,{item:e,config:n,callback:function(){return i(e.id)}},t)}))]})},ge=n(10),he=n.n(ge),ve=n(51),xe=n.n(ve),_e=n(52),Oe=n(18),ye=n.n(Oe),we={M:"m",S:"s"};Object.values(we);function Ne(e){return Object(_e.documentToReactComponents)(e)}var Pe=function(e){var t,n=e.entry,i=e.size;return Object(X.jsx)("div",{className:d()(ye.a.RichText,(t={},Object(c.a)(t,ye.a.mediumSize,i===we.M),Object(c.a)(t,ye.a.smallSize,i===we.S),t)),children:Ne(n)})};var Ie=function(e){var t=e.item,n=e.width;return Object(X.jsxs)("div",{className:xe.a.InfoItem,style:{width:"".concat(n,"px")},children:[!!t.images.length&&Object(X.jsx)(me,Object(m.a)({width:n-2*N(w("--padding-large")),ratio:1.6},t.images[0])),t.text&&Object(X.jsx)(Pe,{entry:t.text,size:"m"})]})};var ke=function(e){var t,n=e.items,a=e.config,o=e.open,r=e.onOpen,s=e.onClose,l=Object(i.useState)(!1),u=Object(f.a)(l,2),j=u[0],m=u[1];Object(i.useEffect)((function(){return m(!0)}),[o]);var p=Math.round(Math.min((null===a||void 0===a?void 0:a.imageSize)||N(w("--default-content-width")),window.innerWidth/2));return O()&&_()&&(p=window.innerWidth),Object(X.jsx)("div",{className:he.a.Info,style:{width:"".concat(p,"px")},children:Object(X.jsx)("div",{className:d()(he.a.infoCurtain,(t={},Object(c.a)(t,he.a.isTransitioning,j),Object(c.a)(t,he.a.isOpen,o),Object(c.a)(t,he.a.isClosed,!o),t)),onAnimationEnd:function(){if(m(!1),o){if("function"!==typeof r)return;r()}else{if("function"!==typeof s)return;s()}},children:n.map((function(e,t){return Object(X.jsx)(Ie,{item:e,width:p},t)}))})})},Ce=n(19),Be=n.n(Ce),Te="";var Se=function(e){var t,n=e.page,i=e.target,a=e.selected,o=e.children;return Te!==a&&(window.scroll(0,0),Te=a),Object(X.jsx)("div",{className:d()(Be.a.PageBox,(t={},Object(c.a)(t,Be.a.isTarget,n===i),Object(c.a)(t,Be.a.isSelected,n===a),t)),children:o})},Ae=n(11),ze=n.n(Ae),Ee=n(12),Me=n.n(Ee);var We=function(){return Object(X.jsx)("div",{style:{fontSize:"26px",transform:"rotate(45deg)"},children:"+"})};var Re=function(e){var t=e.onClose,n=e.numProjects,i=e.currentIndex;return Object(X.jsxs)("div",{className:Me.a.NavClose,children:[!O()&&"number"===typeof n&&"number"===typeof i&&Object(X.jsx)("div",{className:Me.a.counter,children:Object(X.jsx)(ce,{className:Me.a.counterButton,label:"".concat(i+1,"/").concat(n),disabled:!0})}),Object(X.jsx)(ce,{className:Me.a.closeButton,label:Object(X.jsx)(We,{}),cta:function(){return t()}})]})},De=n(13),Le=n.n(De);function Fe(){return Object(X.jsx)("span",{children:"\u2190"})}function Ke(){return Object(X.jsx)("span",{children:"\u2192"})}var He=function(e){var t=e.selectPrev,n=e.selectNext;return Object(X.jsxs)("div",{className:Le.a.NavSkip,children:[Object(X.jsx)(ce,{className:"".concat(Le.a.skipButton," ").concat(Le.a.selectPrev),label:Object(X.jsx)(Fe,{}),cta:t}),Object(X.jsx)(ce,{className:Le.a.skipButton,label:Object(X.jsx)(Ke,{}),cta:n})]})};var Ue=function(e){var t=e.selectedProjectId,n=e.projects,i=e.config,a=e.setProjectId,o=e.onClose,r=n.find((function(e){return e.id===t}));if(!r)return Object(X.jsx)("div",{children:"no project"});var c=n.indexOf(r),s=P(n,c,-1),l=P(n,c,1),u=g(i),d=h(i),f=N(w("--padding-medium")),j=window.innerWidth/2-u,m=u/2;return j<f&&(j=f,m-=f),Object(X.jsxs)("div",{className:ze.a.ProjectDetail,children:[Object(X.jsx)("div",{className:ze.a.imageBox,children:r.images.map((function(e,t){return Object(X.jsx)(me,{width:u,ratio:d,id:e.id,title:e.title,file:e.file},t)}))}),Object(X.jsxs)("div",{className:ze.a.textBox,style:O()?{}:{right:"".concat(j,"px"),width:"".concat(m,"px")},children:[Object(X.jsx)("h1",{children:r.title}),Object(X.jsx)(Pe,{entry:r.text,size:"m"}),Object(X.jsx)(Pe,{entry:r.footnote,size:"s"}),Object(X.jsx)("div",{className:ze.a.space})]}),Object(X.jsx)(He,{selectPrev:function(){a(n[s].id),window.scroll(0,0)},selectNext:function(){a(n[l].id),window.scroll(0,0)}}),Object(X.jsx)(Re,{onClose:o,numProjects:n.length,currentIndex:c})]})};var qe=function(){var e=j(G,J),t=e.state,n=e.asyncDispatch,a=t.siteContent,o=t.targetPage,r=t.selectedPage,s=t.selectedProjectId;Object(i.useEffect)((function(){return n(Q.getSiteContent())}),[n]);var u=(o!==K||r!==K)&&O();return Object(X.jsxs)("div",{className:d()("",Object(c.a)({},l.a.isHome,r===K)),children:[Object(X.jsx)(te,{open:o!==K,onOpen:function(){return n(Q.setPage(o))},onClose:function(){return n(Q.setPage(K))}}),Object(X.jsxs)(Y,{isMobileNav:u,mobileNavIndex:u?o===q?0:1:o===U?1:-1,children:[Object(X.jsx)(ce,{className:u?l.a.mobileNavButton:"",label:u?Object(X.jsx)(We,{}):"Grafik",active:o===H,disabled:!a.projects.length,cta:function(){return n(Q.setTarget(H))}}),Object(X.jsx)(ce,{className:u?l.a.mobileNavButton:"",label:u?"...":"Kontakt + Info",active:o===q,disabled:!a.infoBlocks.length,cta:function(){return n(Q.setTarget(q))}})]}),Object(X.jsx)(ae,{children:Object(X.jsx)(ce,{label:a.config?a.config.documentTitle:"Studio Anderhalden",cta:function(){return n(Q.setTarget(K))}})}),Object(X.jsx)(Se,{page:H,target:o,selected:r,children:Object(X.jsx)(be,{items:a.projects,config:a.config,setProjectId:function(e){n(Q.setProjectId(e)),n(Q.setTarget(U)),n(Q.setPage(U))}})}),r===U&&Object(X.jsx)(Ue,{selectedProjectId:s,projects:a.projects,config:a.config,setProjectId:function(e){return n(Q.setProjectId(e))},onClose:function(){n(Q.setTarget(H)),n(Q.setPage(H))}}),Object(X.jsx)(Se,{page:q,target:o,selected:r,children:Object(X.jsx)(ke,{items:a.infoBlocks,config:a.config,open:o===q,onOpen:function(){return n(Q.setPage(q))},onClose:function(){return n(Q.setPage(o))}})})]})};r.a.render(Object(X.jsx)(a.a.StrictMode,{children:Object(X.jsx)(qe,{})}),document.getElementById("root"))},12:function(e,t,n){e.exports={NavClose:"NavClose_NavClose__1-kWt",counter:"NavClose_counter__3vKV-",counterButton:"NavClose_counterButton__2NWUN",closeButton:"NavClose_closeButton__34JCj"}},13:function(e,t,n){e.exports={NavSkip:"NavSkip_NavSkip__UarSh",skipButton:"NavSkip_skipButton__2XaxE",selectPrev:"NavSkip_selectPrev__3LaqK"}},14:function(e,t,n){e.exports={isHome:"App_isHome__oTROn"}},15:function(e,t,n){e.exports={Navigation:"Navigation_Navigation__1tTPb",mobileNav:"Navigation_mobileNav__34zkU",spacer:"Navigation_spacer__1vJOr"}},16:function(e,t,n){e.exports={Button:"Button_Button__3R1xi",active:"Button_active__TCjlx",disabled:"Button_disabled__2c3jr"}},17:function(e,t,n){e.exports={ProjectsItem:"ProjectsItem_ProjectsItem__ixgAC",title:"ProjectsItem_title__1n-p3"}},18:function(e,t,n){e.exports={RichText:"RichText_RichText__1BywL",mediumSize:"RichText_mediumSize__1Xnal",smallSize:"RichText_smallSize__BL3Kk"}},19:function(e,t,n){e.exports={PageBox:"PageBox_PageBox__CpPMT",isTarget:"PageBox_isTarget__fESuA",isSelected:"PageBox_isSelected__ls1KE"}},26:function(e,t){},27:function(e,t,n){e.exports={Projects:"Projects_Projects__1ECks",centerLine:"Projects_centerLine__39BzK"}},28:function(e,t,n){e.exports={ImageBox:"Image_ImageBox__16ZVW",Image:"Image_Image__1br15"}},50:function(e,t,n){e.exports={Logo:"Logo_Logo__1N0xH",wiggle:"Logo_wiggle__23iAG"}},51:function(e,t,n){e.exports={InfoItem:"InfoItem_InfoItem__26gzv"}},57:function(e,t,n){},86:function(e,t){},9:function(e,t,n){e.exports={Curtain:"Curtain_Curtain__23SsW",left:"Curtain_left__3IErm",right:"Curtain_right__Zgczi",open:"Curtain_open__3Pkll",closed:"Curtain_closed__3MPTA"}}},[[117,1,2]]]);
//# sourceMappingURL=main.4be1f86e.chunk.js.map